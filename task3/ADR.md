### <a name="_b7urdng99y53">Название задачи:</a> Архитектура MVP для открытия депозитов онлайн
### <a name="_hjk0fkfyohdk">Автор:</a> Главный архитектор 
### <a name="_uanumrh8zrui">Дата:</a> 29.01.2026
### <a name="_3bfxc9a45514">Функциональные требования</a>
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

| **№** | **Действующие лица или системы**                       | **Use Case**                                             | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                              |
|:-----:|:-------------------------------------------------------|:---------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  UC1  | Новый клиент, Сайт, Система кол-центра                 | Подача заявки на депозит через сайт                      | 1. Клиент просматривает список депозитов со ставками на сайте.<br>2. Клиент заполняет форму заявки (ФИО, телефон).<br>3. Система сохраняет заявку и передаёт её в систему кол-центра.<br>4. Менеджер кол-центра видит заявку в своей системе и звонит клиенту.<br>5. Клиенту, для дальнейшего открытия депозита, необходимо придти в отделение для индектификации                                                         |
|  UC2  | Система кол-центра, АБС, Сервис ставок                 | Обработка заявки от нового клиента менеджером кол-центра | 1. Менеджер кол-центра видит заявку от нового клиента в своей системе.<br>2. Менеджер может запросить расчёт специальной ставки для клиента через интеграцию с сервисом ставок.<br>3. Менеджер информирует клиента по телефону и может создать предварительную заявку в АБС.                                                                                                                                              |
|  UC3  | Существующий клиент, Интернет-банк, Сервис ставок, АБС | Подача заявки на депозит через интернет-банк (MVP)       | 1. Сотрудник заходит в интерфейс сервиса ставок.<br>2. Сотрудник создаёт, изменяет или рассчитывает ставки для различных условий.<br>3. Система сохраняет ставки в своей БД и делает их доступными для сайта, интернет-банка и АБС.                                                                                                                                                                                       |
|  UC4  | Менеджер бэк-офиса, Сервис ставок, АБС                 | Управление ставками по депозитам                         | 1. Клиент входит в интернет-банк и видит список депозитов с общими и персонализированными ставками.<br>2. Клиент выбирает депозит, указывает счёт и сумму, подтверждает операцию SMS-кодом.<br>3. Система создаёт заявку и отправляет её в АБС для обработки бэк-офисом.<br>4. Менеджер бэк-офиса видит заявку в АБС, проверяет и подтверждает её.<br>5. Система отправляет клиенту SMS-уведомление об открытии депозита. |

### <a name="_u8xz25hbrgql">Нефункциональные требования</a>
Опишите здесь нефункциональные требования и архитектурно значимые требования.

| **№** | **Требование**                                                                                                                     | 
|:-----:|:-----------------------------------------------------------------------------------------------------------------------------------|
| NFR1  | Система должна быть доступна 99,9% времени                                                                                         |
| NFR2  | Отклик интерфейсов на все операции должен быть в пределах 300-500 миллисекунд                                                      |
| NFR3  | Архитектура должна минимизировать прямую нагрузку на БД АБС                                                                        |
| NFR4  | Должна быть обеспечена возможность горизонтального масштабирования интернет-банка                                                  |
| NFR5  | Все передачи чувствительных данных должны быть зашифрованы                                                                         |
| NFR6  | Система должна обеспечивать сохранность данных заявок при сбоях                                                                    |
| NFR7  | Новые компоненты должны использовать технологии, совместимые с существующими, и по возможности те, по которым уже есть экспертиза  |

### <a name="_qmphm5d6rvi3">Решение</a>
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты иht интеграции всех элементов решения. 

![C4-Context](task3/docs/images/c4-context.png)

![C4-Context](task3/docs/images/c4-containers.png)

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.

1) Реализация стратегия Strangler Fig Pattern, с целью постепенного вытеснение функционала через создание промежуточного адаптера для АБС.<br>
2) Выбор технологий на основе существующей экспертизы.  
3) Принцип изоляции и специализации компонентов. Изолируем цифровые каналы через BFF шлюзы.
4) Принцип минимального воздействия на существующие системы. Функционал АБС выносим модулями без замены технологической платформы, в связи с реализацией MVP, и сокрытием взаимодействия за кеширующим Адаптером.
5) Приоритет надежности и отказоустойчивости. Возможность горизонально масштабировать новые stateless сервисы.

### <a name="_bjrr7veeh80c">Альтернативы</a>
Опишите здесь наиболее важные альтернативные решения.

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

### Альтернатива 1: Размещение всей логики в АБС силами команды разработки АБС
**Описание:** Поручить команде АБС разработать новый модуль для расчета ставок и REST API для взаимодействия с цифровыми каналами. Все данные и логика остаются в Oracle, а интернет-банк и сайт обращаются к новому API АБС напрямую.

**Преимущества:** 
 - Единый источник истины: Все данные (клиенты, продукты, ставки, договоры) хранятся в одной системе, что исключает проблемы консистентности.
 - Логичное для бизнеса: Соответствует первоначальному желанию бизнеса "реализовать функциональность в АБС".

**Недостатки, ограничения, риски:**
 - Высокий риск и долгий срок, разработка на стеке Delphi/PL-SQL командой, не имеющей опыта создания внешних API, займет много времени и сопряжена с высоким риском срыва сроков MVP.
 - Низкая гибкость, любое изменение в будущем будет зависеть от цикла релизов монолитной АБС.
 - Прямые вызовы API из онлайн-систем создадут дополнительную нагрузку.
 - Проблемы с масштабированием: АБС может масштабироваться только вертикально.

**Вывод:** Отклонена из-за высокого риска для сроков MVP, потенциального негативного воздействия на производительность АБС и отсутствия гибкости.

### Альтернатива 2: Полная замена интернет-банка на новую микросервисную платформу

**Описание:** Отказ от доработки старого монолита интернет-банка. Параллельная разработка новой платформы на основе микросервисов (Java/Spring Cloud/Kubernetes), которая сразу включает функционал онлайн-депозитов. Старый интернет-банк остается для старого функционала.

**Преимущества:**
 - Современная архитектура, позволяет сразу получить все преимущества микросервисов.
 - Избавляет от проблем с устаревшим стеком и монолитной архитектурой.

**Недостатки, ограничения, риски:**
 - Высокий порог входа и риск. Требует найма или обучения команд совершенно новым технологиям (распределенные транзакции, построение микросервисной архитектуры, Kubernetes).
 - Очень долгий срок до MVP. Создание базовой платформы, миграция клиентов займут не менее года. 
 - Параллельная поддержка двух систем, удваивает операционную нагрузку на IT-отдел.
 - Бизнес не может ждать год для запуска онлайн-депозитов.

**Вывод:** Отклонена как стратегически верное, но тактически неприемлемое для MVP решение. Выбранный подход (Strangler Fig) является компромиссом, позволяющим начать движение в этом направлении, но с быстрым получением результата.